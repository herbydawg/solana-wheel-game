{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\jakob\\\\Documents\\\\clips\\\\client\\\\src\\\\components\\\\CountdownTimer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CountdownTimer = ({\n  timeRemaining,\n  gameState\n}) => {\n  _s();\n  const [displayTime, setDisplayTime] = useState('00:00');\n  const [progress, setProgress] = useState(0);\n  const [localTimeRemaining, setLocalTimeRemaining] = useState(timeRemaining);\n  const totalTime = 5 * 60 * 1000; // 5 minutes in ms\n\n  // Update local time when server time changes - ensure proper reset\n  useEffect(() => {\n    if (timeRemaining && timeRemaining > 0 && timeRemaining <= totalTime) {\n      setLocalTimeRemaining(timeRemaining);\n    } else if (timeRemaining === 0 || !timeRemaining) {\n      setLocalTimeRemaining(0);\n      setProgress(0);\n    }\n  }, [timeRemaining, totalTime]);\n\n  // Smooth countdown using client-side timer\n  useEffect(() => {\n    if (gameState === 'waiting' && localTimeRemaining > 0) {\n      const interval = setInterval(() => {\n        setLocalTimeRemaining(prev => {\n          if (prev <= 1000) {\n            clearInterval(interval);\n            return 0;\n          }\n          return prev - 1000;\n        });\n      }, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [gameState, localTimeRemaining]);\n  useEffect(() => {\n    if (localTimeRemaining && localTimeRemaining > 0) {\n      // Calculate display time\n      const totalSeconds = Math.floor(localTimeRemaining / 1000);\n      const minutes = Math.floor(totalSeconds / 60);\n      const seconds = totalSeconds % 60;\n      setDisplayTime(`${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`);\n\n      // Calculate progress (0-100) - reset to 0 when new countdown starts\n      // Use the actual time remaining as the basis for calculation\n      const elapsed = totalTime - localTimeRemaining;\n      const progressPercent = elapsed / totalTime * 100;\n      setProgress(Math.min(100, Math.max(0, progressPercent)));\n    } else {\n      setDisplayTime('00:00');\n      setProgress(gameState === 'spinning' ? 100 : 0);\n    }\n  }, [localTimeRemaining, gameState, totalTime]);\n  const getTimerColor = () => {\n    if (gameState === 'spinning') return '#f59e0b';\n    if (timeRemaining < 30000) return '#ef4444'; // Red for last 30 seconds\n    if (timeRemaining < 60000) return '#f59e0b'; // Yellow for last minute\n    return '#00d4ff'; // Blue for normal\n  };\n  const getStatusText = () => {\n    switch (gameState) {\n      case 'spinning':\n        return 'SPINNING...';\n      case 'processing':\n        return 'PROCESSING...';\n      case 'completed':\n        return 'COMPLETED';\n      case 'paused':\n        return 'PAUSED';\n      default:\n        return 'NEXT SPIN IN';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    initial: {\n      opacity: 0,\n      scale: 0.8\n    },\n    animate: {\n      opacity: 1,\n      scale: 1\n    },\n    className: \"flex flex-col items-center mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-400 text-sm font-medium mb-2\",\n        children: getStatusText()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), gameState === 'waiting' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-white text-4xl lg:text-5xl font-bold font-cyber mb-2\",\n        children: displayTime\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), (gameState === 'spinning' || gameState === 'processing') && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mb-2\",\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        animate: gameState === 'spinning' ? {\n          rotate: 360\n        } : {\n          scale: [1, 1.2, 1]\n        },\n        transition: gameState === 'spinning' ? {\n          duration: 1,\n          repeat: Infinity,\n          ease: 'linear'\n        } : {\n          duration: 1,\n          repeat: Infinity\n        },\n        className: \"text-4xl lg:text-5xl mb-2\",\n        children: gameState === 'spinning' ? 'ðŸŽ°' : 'âš¡'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass px-4 py-2 rounded-full\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-400 text-sm\",\n          children: gameState === 'waiting' ? 'Auto-spin 5min' : gameState === 'spinning' ? 'Selecting Winner...' : gameState === 'processing' ? 'Processing Payout...' : 'Updated'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s(CountdownTimer, \"ZwTbNSF0nkl9YRccu5qkQlNdeuQ=\");\n_c = CountdownTimer;\nexport default CountdownTimer;\nvar _c;\n$RefreshReg$(_c, \"CountdownTimer\");","map":{"version":3,"names":["React","useState","useEffect","motion","CircularProgressbar","buildStyles","jsxDEV","_jsxDEV","CountdownTimer","timeRemaining","gameState","_s","displayTime","setDisplayTime","progress","setProgress","localTimeRemaining","setLocalTimeRemaining","totalTime","interval","setInterval","prev","clearInterval","totalSeconds","Math","floor","minutes","seconds","toString","padStart","elapsed","progressPercent","min","max","getTimerColor","getStatusText","div","initial","opacity","scale","animate","className","children","fileName","_jsxFileName","lineNumber","columnNumber","rotate","transition","duration","repeat","Infinity","ease","_c","$RefreshReg$"],"sources":["c:/Users/jakob/Documents/clips/client/src/components/CountdownTimer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\n\r\nconst CountdownTimer = ({ timeRemaining, gameState }) => {\r\n  const [displayTime, setDisplayTime] = useState('00:00');\r\n  const [progress, setProgress] = useState(0);\r\n  const [localTimeRemaining, setLocalTimeRemaining] = useState(timeRemaining);\r\n  const totalTime = 5 * 60 * 1000; // 5 minutes in ms\r\n\r\n  // Update local time when server time changes - ensure proper reset\r\n  useEffect(() => {\r\n    if (timeRemaining && timeRemaining > 0 && timeRemaining <= totalTime) {\r\n      setLocalTimeRemaining(timeRemaining);\r\n    } else if (timeRemaining === 0 || !timeRemaining) {\r\n      setLocalTimeRemaining(0);\r\n      setProgress(0);\r\n    }\r\n  }, [timeRemaining, totalTime]);\r\n\r\n  // Smooth countdown using client-side timer\r\n  useEffect(() => {\r\n    if (gameState === 'waiting' && localTimeRemaining > 0) {\r\n      const interval = setInterval(() => {\r\n        setLocalTimeRemaining(prev => {\r\n          if (prev <= 1000) {\r\n            clearInterval(interval);\r\n            return 0;\r\n          }\r\n          return prev - 1000;\r\n        });\r\n      }, 1000);\r\n\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [gameState, localTimeRemaining]);\r\n\r\n  useEffect(() => {\r\n    if (localTimeRemaining && localTimeRemaining > 0) {\r\n      // Calculate display time\r\n      const totalSeconds = Math.floor(localTimeRemaining / 1000);\r\n      const minutes = Math.floor(totalSeconds / 60);\r\n      const seconds = totalSeconds % 60;\r\n\r\n      setDisplayTime(`${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`);\r\n\r\n      // Calculate progress (0-100) - reset to 0 when new countdown starts\r\n      // Use the actual time remaining as the basis for calculation\r\n      const elapsed = totalTime - localTimeRemaining;\r\n      const progressPercent = (elapsed / totalTime) * 100;\r\n      setProgress(Math.min(100, Math.max(0, progressPercent)));\r\n    } else {\r\n      setDisplayTime('00:00');\r\n      setProgress(gameState === 'spinning' ? 100 : 0);\r\n    }\r\n  }, [localTimeRemaining, gameState, totalTime]);\r\n\r\n  const getTimerColor = () => {\r\n    if (gameState === 'spinning') return '#f59e0b';\r\n    if (timeRemaining < 30000) return '#ef4444'; // Red for last 30 seconds\r\n    if (timeRemaining < 60000) return '#f59e0b'; // Yellow for last minute\r\n    return '#00d4ff'; // Blue for normal\r\n  };\r\n\r\n  const getStatusText = () => {\r\n    switch (gameState) {\r\n      case 'spinning': return 'SPINNING...';\r\n      case 'processing': return 'PROCESSING...';\r\n      case 'completed': return 'COMPLETED';\r\n      case 'paused': return 'PAUSED';\r\n      default: return 'NEXT SPIN IN';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.8 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      className=\"flex flex-col items-center mb-4\"\r\n    >\r\n      {/* Status Text */}\r\n      <div className=\"text-center mb-2\">\r\n        <div className=\"text-gray-400 text-sm font-medium mb-2\">\r\n          {getStatusText()}\r\n        </div>\r\n        {gameState === 'waiting' && (\r\n          <div className=\"text-white text-4xl lg:text-5xl font-bold font-cyber mb-2\">\r\n            {displayTime}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Large Timer Display for other states */}\r\n      {(gameState === 'spinning' || gameState === 'processing') && (\r\n        <div className=\"text-center mb-2\">\r\n          <motion.div\r\n            animate={gameState === 'spinning' ? { rotate: 360 } : { scale: [1, 1.2, 1] }}\r\n            transition={gameState === 'spinning' ?\r\n              { duration: 1, repeat: Infinity, ease: 'linear' } :\r\n              { duration: 1, repeat: Infinity }\r\n            }\r\n            className=\"text-4xl lg:text-5xl mb-2\"\r\n          >\r\n            {gameState === 'spinning' ? 'ðŸŽ°' : 'âš¡'}\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Additional Info */}\r\n      <div className=\"text-center\">\r\n        <div className=\"glass px-4 py-2 rounded-full\">\r\n          <span className=\"text-gray-400 text-sm\">\r\n            {gameState === 'waiting' ? 'Auto-spin 5min' :\r\n             gameState === 'spinning' ? 'Selecting Winner...' :\r\n             gameState === 'processing' ? 'Processing Payout...' :\r\n             'Updated'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default CountdownTimer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}